
> service-map-viz@0.1.0 test
> vitest run --run


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90m/home/espen/proj/arch-viz[39m

 [32mâœ“[39m src/logic/nodeOperations.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/logic/parser.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/logic/storage.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m src/logic/exports.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mâœ“[39m src/logic/accordion.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 55[2mms[22m[39m
 [32mâœ“[39m src/logic/filters.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 101[2mms[22m[39m
 [32mâœ“[39m src/logic/layoutManager.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/logic/graphEvents.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32mâœ“[39m src/logic/serviceForm.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32mâœ“[39m src/logic/ui.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 142[2mms[22m[39m
 [31mâ¯[39m src/logic/panel.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 230[2mms[22m[39m
     [32mâœ“[39m should update panel content with node data[32m 52[2mms[22m[39m
     [32mâœ“[39m should hide panel and clear state[32m 4[2mms[22m[39m
[31m     [31mÃ—[31m should display outgoing connections in panel[39m[32m 14[2mms[22m[39m
     [32mâœ“[39m should initialize panel and attach listeners[32m 4[2mms[22m[39m
     [32mâœ“[39m should disable save button when entering edit mode[32m 56[2mms[22m[39m
     [32mâœ“[39m should enable save button when input changes[32m 25[2mms[22m[39m
     [32mâœ“[39m should correctly update node tier and classes when saving[32m 27[2mms[22m[39m
     [32mâœ“[39m should parse multi-label input correctly[32m 19[2mms[22m[39m
     [32mâœ“[39m should store original data for dirty comparison[32m 5[2mms[22m[39m
     [32mâœ“[39m should display descriptive tier label in showPanel[32m 4[2mms[22m[39m
     [32mâœ“[39m should render a tier dropdown with correct selection in edit mode[32m 11[2mms[22m[39m
     [32mâœ“[39m should show "No dependencies" text when node has no connections[32m 5[2mms[22m[39m
 [32mâœ“[39m src/logic/zoom.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m src/logic/graphConfig.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mâœ“[39m src/logic/graphUtils.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 9[2mms[22m[39m

[31mâ¯â¯â¯â¯â¯â¯â¯[39m[1m[41m Failed Tests 1 [49m[22m[31mâ¯â¯â¯â¯â¯â¯â¯[39m

[41m[1m FAIL [22m[49m src/logic/panel.test.ts[2m > [22mPanel Module[2m > [22mshould display outgoing connections in panel
[31m[1mTypeError[22m: node.cy is not a function[39m
[36m [2mâ¯[22m Module.showPanel src/logic/panel.ts:[2m64:21[22m[39m
    [90m 62| [39m
    [90m 63| [39m    [90m// Auto-initialize listeners if cy instance changed[39m
    [90m 64| [39m    [35mconst[39m cy [33m=[39m node[33m.[39m[34mcy[39m() [35mas[39m [33mCyInstance[39m[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m 65| [39m    [35mif[39m (cyRef [33m!==[39m cy) {
    [90m 66| [39m        [34minitPanel[39m(cy[33m,[39m updateStatus)[33m;[39m
[90m [2mâ¯[22m src/logic/panel.test.ts:[2m117:9[22m[39m

[31m[2mâ¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/1]â¯[22m[39m


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m13 passed[39m[22m[90m (14)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m76 passed[39m[22m[90m (77)[39m
[2m   Start at [22m 20:48:07
[2m   Duration [22m 2.79s[2m (transform 1.77s, setup 0ms, import 2.66s, tests 779ms, environment 16.96s)[22m

